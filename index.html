
<!DOCTYPE html> 
<html>
<head>
  <title>Pavegen Array Configurator - V1</title>
  <link rel="stylesheet" type="text/css" href="styles.css">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.3.2/html2canvas.min.js"></script>
<!--  -->
</head>
<body>

  <div id="logoContainer">
    <img id="logo" src="assets/Pavegen-logo.png" alt="Logo">
  </div>

 <button id="downloadButton">Download Configuration</button>
 
<!-- Adding slide container -->
 <div class="slider-container">
  <div class="slider-group">
    <label for="lengthInput">Tiles long</label>
    <input type="range" id="lengthSlider" min="2" max="20" value="10">
    <input type="text" id="lengthInput" value="10">
  </div>
  
  <div class="slider-group">
    <label for="widthInput">Tiles wide</label>
    <input type="range" id="widthSlider" min="2" max="10" value="5">
    <input type="text" id="widthInput" value="5">
  </div>
</div>
  
  <div class="properties-table">
    <table>
      <tr>
        <th>Tiles Long</th>
        <th>Tiles Wide</th>
        <th>Length (m)</th>
        <th>Width (m)</th>
        <th>Area (m2)</th>
        <th># Generators</th>
        <th># Full Tiles</th>
        <th># 1/2 tiles</th>
      </tr>
      <tr>
        <td id="tilesLong">-</td>
        <td id="tilesWide">-</td>
        <td id="lengthM">-</td>
        <td id="widthM">-</td>
        <td id="areaM2">-</td>
        <td id="numGenerators">-</td>
        <td id="fullTiles">-</td>
        <td id="halfTiles">-</td>
      </tr>
    </table>
  </div>

  <div id="gridContainer"></div>

  <script src="renderer.js"></script>
  
  <script>
    document.addEventListener('DOMContentLoaded', () => {
      console.log('Document loaded');
      const downloadButton = document.getElementById('downloadButton');
    
      if (downloadButton) {
        console.log('Download button found');
        downloadButton.addEventListener('click', () => {
          console.log('Download button clicked');
          const gridContainer = document.getElementById('gridContainer');
          const width = document.getElementById('widthInput').value; // Get width from input
          const length = document.getElementById('lengthInput').value; // Get length from input
          if (gridContainer) {
            console.log('Grid container found');
            html2canvas(gridContainer).then(canvas => {
              console.log('Canvas created');
              const dataUrl = canvas.toDataURL();
              console.log('Data URL created');
              
              // Check if we are in Electron
              if (window.ipcRenderer) {
                // Running inside Electron, send the message to the main process
                window.ipcRenderer.send('save-screenshot', { dataUrl, width, length });
                console.log('Data URL and dimensions sent to main process');
              } else {
                // Running inside a browser, download the image directly
                const link = document.createElement('a');
                link.href = dataUrl;
                link.download = `configuration_${width}x${length}.png`;
                link.click();
                console.log('Image downloaded in browser');
              }
            }).catch(error => {
              console.error('Failed to create canvas', error);
            });
          } else {
            console.error('Grid container not found');
          }
        });
      } else {
        console.error('Download button not found');
      }
    });
</script>
 
  
</body>
</body>
</html>

// delete this